<!DOCTYPE html>
<head>
  <title>小学生の夏休みの居場所MAP(中野区)</title>
  <meta charset="utf-8" />
  <link rel="icon" type="image/x-icon" href="./favicon.png" />
  <link
      rel="stylesheet"
      href="https://pyscript.net/latest/pyscript.css"
  />
  <script defer src="https://pyscript.net/latest/pyscript.js"></script>
  <link rel="stylesheet" href="./assets/css/examples.css" />
  <style>
    body, body a{
      color:white;
    }
  </style>
</head> 

  <body>
    <div style="width: 100%; height: 3em; background-color:#3d0e88">
        <h1 style="font-size: 1em;color:#fff">小学生の夏休みの居場所MAP(中野区)<span style="font-size: 0.5em">※室内、事前予約不要で過ごせそうな場所についてまとめています。児童館、キッズ・プラザについては面積を記載していますが、こどもが遊べる場所の面積ではなく、事務室や乳幼児室、倉庫も含む数字です。<br>データ出典：①中野区オープンデータ（2024/8/11時点）
          ライセンス：<a href="https://creativecommons.org/licenses/by/4.0/deed.ja">クリエイティブ・コモンズ・ライセンス 表示４．０国際</a>②中野区区有施設整備計画2021▸2030</span></h1>
    </div>
    <div id="folium"></div>            
                <py-config>
                    packages = [
                      "folium",
                      "pandas"
                    ]                    
                </py-config>

                <py-script>
                    import folium
                    import json
                    import pandas as pd
                    import urllib3

                    from pyodide.http import open_url
                    from folium.features import DivIcon
                    from folium.features import CustomIcon
                    import urllib3
                    
                    urllib3.disable_warnings(urllib3.exceptions.InsecureRequestWarning)
                    
                    m = folium.Map(location=[35.7111326404866, 139.66453528858855], zoom_start=14, tiles="cartodb positron")

                    geojson_data = urllib3.request("GET","https://raw.githubusercontent.com/RefletsDansLeau/Nakanoku-geojson/master/nakano_ku_school_district.json",preload_content=False).json() 
                    
                    folium.GeoJson(geojson_data,name="nakanoku").add_to(m)
                    
                    url_01 = (
                        "https://docs.google.com/spreadsheets/d/1oNBu63qKRZEdC174uC_NqNXHfpW8fitP/export?format=csv&gid=8996997"
                    )
                    url_01_content = open_url(url_01)
                    list_01 = pd.read_csv(url_01_content)
                    
                    for index, row in list_01.iterrows():
                        folium.Marker(
                            location= [row['緯度'],row['経度']],
                            icon=folium.features.CustomIcon(icon_image="https://github.com/RefletsDansLeau/RefletsDansLeau.github.io/blob/2663be3087fb62a0315b49fc45f831434f4403c6/pic_map/"+row['アイコン']+"?raw=true",
                                                            icon_size=(25,25),
                                                            icon_anchor=(10,10)),
                        ).add_to(m)
                        folium.Marker(
                            location= [row['緯度'],row['経度']],
                            icon=folium.features.DivIcon(icon_size=(60,20),
                                icon_anchor=(5,-5),
                                html=row['広さ'],
                                ),
                                tooltip=row['名称'],
                        ).add_to(m)

                    url_02 = (
                          "https://docs.google.com/spreadsheets/d/1oNBu63qKRZEdC174uC_NqNXHfpW8fitP/export?format=csv&gid=955470168"
                      )
                    url_02_content = open_url(url_02)
                    list_02 = pd.read_csv(url_02_content)
                    
                    for index, row in list_02.iterrows():
                        folium.Marker(
                            location= [row['緯度'],row['経度']],
                            icon=folium.features.CustomIcon(icon_image="https://github.com/RefletsDansLeau/RefletsDansLeau.github.io/blob/2663be3087fb62a0315b49fc45f831434f4403c6/pic_map/"+row['アイコン']+"?raw=true",
                                                            icon_size=(20,20),
                                                            icon_anchor=(10,10)),
                        ).add_to(m)
                        folium.Marker(
                            location= [row['緯度'],row['経度']],
                            icon=folium.features.DivIcon(icon_size=(20,20),
                                icon_anchor=(-10,-10),
                                ),
                                tooltip=row['名称'],
                        ).add_to(m)

                    url_03 = (
                          "https://docs.google.com/spreadsheets/d/1oNBu63qKRZEdC174uC_NqNXHfpW8fitP/export?format=csv&gid=657164188"
                      )
                    url_03_content = open_url(url_03)
                    list_03 = pd.read_csv(url_03_content)
                    
                    for index, row in list_03.iterrows():
                        folium.Marker(
                            location= [row['緯度'],row['経度']],
                            icon=folium.features.CustomIcon(icon_image="https://github.com/RefletsDansLeau/RefletsDansLeau.github.io/blob/"+row['絶対パス']+"/pic_map/"+row['アイコン']+"?raw=true",
                                                            icon_size=(20,20),
                                                            icon_anchor=(0,0)),
                        ).add_to(m)
                        folium.Marker(
                            location= [row['緯度'],row['経度']],
                            icon=folium.features.DivIcon(icon_size=(10,20),
                                icon_anchor=(0,3),
                                ),
                                tooltip=row['名称'],
                        ).add_to(m)



                    folium.LayerControl().add_to(m)

                    display(m, target="folium")
                </py-script>
            
  </body>
</html>
